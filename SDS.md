# Software Design Specification

### Содержание
1. [Введение](#1)<br>
1.1 [Цель](#1.1)<br>
1.2 [Объем](#1.2)<br>
1.3 [Определения, акронимы и сокращения](#1.3)<br>
2. [Системный обзор](#2)<br>
3. [Соображение по дизайну](#3)<br>
3.1 [Предположения и зависимости](#3.1)<br>
3.2 [Общие ограничения](#3.2)<br>
3.3 [Цели и рекомендации](#3.3)<br>
3.4 [Методология разработки](#3.4)<br>
4. [Архитектурная стратегия](#4)<br>
5. [Описание базы данных](#5)<br>
5.1 [Описание базы данных](#5.1)<br>
5.2 [Таблицы](#5.2)<br>
6. [Дизайн высокого уровня](#6)<br>
6.1 [Пользователь](#6.1)<br>
6.2 [Администратор](#6.2)<br>
7. [Диаграмма классов](#7)<br>
8. [Диаграмма базы данных](#8)<br>
9. [Описание архитектуры](#9)<br>
10. [Описание сетевого взаимодействия](#10)<br>
11. [Use cases](#11)<br>
11.1 [User](#11.1)<br>
11.2 [Admin](#11.2)<br>
12. [Структура приложения](#12)<br>
13. [Диаграмма развертывания](#13)<br>



## 1. Введение <a name="1"></a>

### 1.1 Цель <a name="1.1"></a>
Целю данного документа является представить подробное описание сайта интернет-кафе. Здесь будут описаны программные средства и решения для реализации проекта.

### 1.2 Объем <a name="1.2"></a>
Документ по дизайну программного обеспечения продемонстрирует, как дизайн будет выполнять функциональные и нефункциональные требования, зафиксированные в спецификации требований к программному обеспечению (SRS). Документ предоставит платформу программистам посредством описания компонентов высокого уровня и архитектуры, подсистемы, интерфейса, дизайн базы данных и дизайн алгоритма. Это достигается за счет использования архитектурных паттернов, паттернов проектирования, диаграмм базы данных, диаграмм классов, реляционных модели и пользовательские интерфейсы.

### 1.3 Определения <a name="1.3"></a>
* Пользователь - человек, использующий систему
* База данных - коллекция хранимых связанных данных
* Архитектурный дизайн - установление общей структуры программного комплекса

## 2. Системный обзор <a name="2"></a>
Данный сайт представляет собой онлайн кафе с понятным интерфейсом. Данный сайт разрабатывается для экономии времени у людей на поход в кафе, ресторан. Данная система позволяет выбрать один или несколько заказов, указать адрес доставки и совершить заказ. Кроме того, система позволяет выбирать категории товаров, что упростит поиск нужного продукта для потребителя.

## 3. Соображения по дизайну <a name="3"></a>
Для работы сайта у пользователя должен быть в наличии один из видов устройств: мобильный телефон, планшет, компьютер и доступ к интернету, а также установленный браузер последней версии.

### 3.1 Предположения и зависимости <a name="3.1"></a>
* Сайт может поддерживать от 1-го до N-пользователей
* При тестировании системы будут использоваться собственные значения базы данных товаров 

### 3.2 Общие ограничения <a name="3.2"></a>
* Серверная часть будет реализована на Tomcat 9.0.0 M9
* Для хранения данных будет использоваться реляционная база данных MySQL
* Разметка страницы будет производиться с помощью технологии Jsp
* Для связи моделей с базой данных будет использоваться DAO pattern с Mysql connector driver

### 3.3 Цели и рекомендации <a name="3.3"></a>
* При тестировании системы будут использоваться собственные значения базы данных товаров
* Система должна быть полностью функциональна в запланированные сроки
* Интерфейс должен был интуитивно понятным для базового пользователя

### 3.4 Методология разработки <a name="3.4"></a>
Этот проект осуществляется с использованием модифицированной парадигмы водопада. 
Процесс разработки выглядит как поток, последовательно происходящей фазы анализа требований, проектирования, реализации, тестирования, интеграции и поддержки. 
Так же возможен возврат при разработке на предыдущий этап и рассмотрение модификации решения.

## 4. Архитектурная стратегия <a name="4"></a>
На архитектуру и дизайн повлияли следующие дизайнерские решения и стратегии:
* В дизайне используются объектно-ориентированные принципы (ООП). Компромисс увеличения накладных расходов на код и объектная передача сообщений считается оправданной за счет модульности функциональности, данных инкапсуляция, связь через интерфейсы и повторное использование через полиморфизм
* Вся система использует клиент-серверную архитектуру
* Для пользователя интерфейс будет представлен в качестве HTML страницы
* Данные будут храниться в базе данных. При запросе клиента на предоставление информации, модель на серверной части системы свяжется с базой данных и контроллер предоставит информацию в качестве ответа
* Используемые паттерны: Builder, MVC, Singleton, Abstract Factory, Command, Proxy, Filter Chain, Object pool.
* Взаимодействие клиента и сервера будут производиться с помощью Https протокола.

## 5. Структура базы данных <a name="5"></a>

### 5.1 Описание базы данных <a name="5.1"></a>
В качестве базы данных выбрана MySQL.

### 5.2 Таблицы <a name="5.2"></a>
Сервер связан с базой данных которая хранит в себе таблицы:
* client - таблица, содержащая в себе информацию о клиентах.
* client_comment - таблица, содержащая информацию о отзывах пользователей.
* hall - таблица, содержащая информацию о залах.
* meal - таблица, содержащая информацию о блюдах.
* meal_category - таблица, содержашая информацию о категориях блюд.
* meal_composition - таблица, содержащая информацию о составе блюда.
* meal_ingredient - таблица, содержашая информацию о ингридиентах.
* order - таблица, содержащая информацию о заказах.
* order_composition - таблица, содержащая информацию о блюдах включенных в заказы.
* reservation - таблица, содержащая информацию о бронировании залов.
* user - таблица, содержащая информацию о всех зарегистрированных пользователях.
Все эти таблицы имеют первичный ключ для идентификации (Id).

#### Таблица client 
|Поле|Назначение|
|:---|:---|
|id|идентификатор клиента|
|name|имя клиента|
|loyalty_points|баллы лояльности|
|bonuses|кол-во бонусов|
|isBanned|статус блокировки|
|fk_user_id|идентификатор пользователя|

#### Таблица client_comment
|Поле|Назначение|
|:---|:---|
|id|номер отзыва|
|author_name|имя автора отзыва|
|author_phone|телефон автора отзыва|
|message|отзыв|

#### Таблица hall
|Поле|Назначение|
|:---|:---|
|id|идентификатор зала|
|guests_number|кол-во мест в зале|
|hall-name|название зала|
|hall-description|описание зала|

#### Таблица meal 
|Поле|Назначение|
|:---|:---|
|id|идентификатор блюда|
|name|название|
|price|стоимость|
|pic-url|адрес картинки|
|fk_category_id|идентификатор категории|

#### Таблица meal_category
|Поле|Назначение|
|:---|:---|
|id|идентификатор категории|
|name|название|
|pic-url|адрес картинки|

#### Таблица meal_composition
|Поле|Назначение|
|:---|:---|
|fk_meal_id|идентификатор блюда|
|fk_meal_ingredient_id|идентификатор ингридиента|
|ingredient_mass|масса ингридиента|

#### Таблица meal_ingredient
|Поле|Назначение|
|:---|:---|
|id|идентификатор ингредиента|
|name|название|
|pic-url|адрес картинки|

#### Таблица order
|Поле|Назначение|
|:---|:---|
|id|идентификатор заказа|
|fk_client_id|идентификатор клиента сделавшего заказ|
|order_datetime|время и дата заказа|
|isPaid|статус оплаты|
|isPrepared|статус готовности|
|isTaken|статус доставки|
|isOnlinePaid|статус онлайн оплаты|
|Client_comment|комментарий к заказу от клиента|
|Client_mark|оценка от клиента|

#### Таблица order_composition
|Поле|Назначение|
|:---|:---|
|fk_order_id|идентификатор заказа|
|fk_meal_id|идентификатор блюда|
|meal_price|стоимость|
|meal_name|название блюда|

#### Таблица reservation
|Поле|Назначение|
|:---|:---|
|id|идентификатор брони|
|reservation_date|дата брони|
|fk_hall_id|идентификатор зала|
|contact_phone|телефон забронировавшего|
|contact_time|время брони|

#### Таблица user
|Поле|Назначение|
|:---|:---|
|id|идентификатор пользователя|
|username|имя пользователя|
|password|хэш пароля пользователя|
|email|email пользователя|
|phone|контактный телефон|
|isPromoted|статус пользователя(Админ/пользователь)|

## 6 Дизайн высокого уровня <a name="6"></a>
  
### 6.1 Пользователь <a name="6.1"></a>
* [Домой](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/user/Main%20menu.PNG)
* [Авторизация](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/user/%D0%B0%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F.PNG)
* [Бронирование зала](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/user/%D0%B1%D1%80%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B7%D0%B0%D0%BB%D0%B0.PNG)
* [Меню бронирования](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/user/%D0%BC%D0%B5%D0%BD%D1%8E%20%D0%B1%D1%80%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.png)
* [Меню с блюдами](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/user/%D0%BC%D0%B5%D0%BD%D1%8E.PNG)
* [Как сделать заказ](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/user/%D1%81%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C%20%D0%B7%D0%B0%D0%BA%D0%B0%D0%B7.PNG)
  
### 6.2 Администратор <a name="6.2"></a>
* [Категории](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%9A%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D0%B8.PNG)
* [Заказы](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%B7%D0%B0%D0%BA%D0%B0%D0%B7%D1%8B.PNG)
* [Залы](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%B7%D0%B0%D0%BB%D1%8B.PNG)
* [Ингредиенты](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%B8%D0%BD%D0%B3%D1%80%D0%B8%D0%B4%D0%B8%D0%B5%D0%BD%D1%82%D1%8B.PNG)
* [Информация о заказе](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BE%20%D0%B7%D0%B0%D0%BA%D0%B0%D0%B7%D0%B5.PNG)
* [Информация о пользователе](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BE%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5.PNG)
* [Личный кабинет](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D0%B9%20%D0%BA%D0%B0%D0%B1%D0%B8%D0%BD%D0%B5%D1%82.PNG)
* [Пользователи](https://github.com/tahan3/Tahan-Cafe/blob/main/Mockups/admin/%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B8.PNG)
* [Отзывы](../Mockups/admin/reviews.PNG)

## 7 Диаграмма классов <a name="7"></a>
![Диаграмма классов](https://github.com/tahan3/Tahan-Cafe/blob/main/Diagrams/class%20diagram.png)

## 8 Диаграмма базы данных <a name="8"></a>
![Диаграмма базы данных](https://github.com/tahan3/Tahan-Cafe/blob/main/Diagrams/data%20base%20diagram.png)

## 9 Описание архитектуры <a name="9"></a>
Для реализации интернет-кафе была выбрана клиент-серверная архитектура. Данная архитектура состоит из двух частей: сервера и множества клиентов. Серверный компонент предоставляет службы клиентским компонентам. Клиенты запрашивают услуги у сервера, а он, в свою очередь, оказывает эти самые услуги клиентам.

## 10 Описание сетевого взаимодействия <a name="10"></a>
Связь между клиентом и сервером осуществляется через протокол Https. Это протокол, который обеспечивает конфиденциальность обмена данными между сайтом и пользовательским устройством. Безопасность информации обеспечивается за счет использования криптографических протоколов SSL/TLS, имеющих 3 уровня защиты:
* Сохранность данных. Любое изменение данных фиксируется.
* Аутентификация. Защищает от перенаправления пользователя.
* Шифрование данных. Позволяет избежать их перехвата.

## 11 Use cases <a name="11"></a>

### 11.1 User <a name="11.1"></a>
![use case User](https://github.com/tahan3/Tahan-Cafe/blob/main/Diagrams/use%20case%20user.png)

### 11.2 Admin <a name="11.2"></a>
![use case Admin](https://github.com/tahan3/Tahan-Cafe/blob/main/Diagrams/use%20case%20admin.png)

## 12 Структура приложения <a name="12"></a>
Приложения было написано на основе паттерна MVC. Исходя из этого есть 3 пакета: 
![use case Admin](https://github.com/tahan3/Tahan-Cafe/blob/main/Diagrams/application%20structure.png)

## 13 Диаграмма развертывания <a name="13"></a>
![Диаграмма развертывания](https://github.com/tahan3/Tahan-Cafe/blob/main/Diagrams/deployment%20diagram.png)
